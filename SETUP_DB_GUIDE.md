# دليل الإنشاء والتشغيل السريع (VPS Setup Guide)

هذا الدليل يشرح كيفية إنشاء قاعدة البيانات وتشغيل النظام بالكامل من الصفر على السيرفر الخاص بك.

## المتطلبات
*   سيرفر VPS (تم توفيره: `185.225.233.103`).
*   تم رفع ملفات المشروع إلى السيرفر.

## الخطوات (نفذها بالترتيب)

### 1. الدخول للمشروع وتجهيز البيئة
ادخل إلى مجلد المشروع على السيرفر، ثم قم بنسخ ملف الإعدادات:

```bash
cd moonlight-noexis
cp .env.example .env
```
*(لا تحتاج لتعديل شيء، الإعدادات الافتراضية جاهزة للعمل على IP سيرفرك)*.

### 2. تنظيف أي بقايا سابقة (اختياري - للتأكد من بداية نظيفة)
إذا كنت قد جربت التشغيل سابقاً، يفضل حذف كل شيء للبدء من جديد (تحذير: هذا يحذف البيانات القديمة):

```bash
docker-compose down -v
```

### 3. التشغيل وإنشاء قاعدة البيانات (الخطوة السحرية)
هذا الأمر سيقوم بكل شيء: تحميل الصور، تشغيل الخدمات، **وإنشاء جداول قاعدة البيانات والدوال تلقائياً**:

```bash
docker-compose up -d --build
```

### 4. التحقق من النجاح
انتظر دقيقة واحدة حتى تعمل جميع الخدمات، ثم تحقق من الحالة:

```bash
docker-compose ps
```
يجب أن ترى جميع الخدمات بحالة `Up` أو `healthy`.

### 5. الدخول للنظام
الآن النظام يعمل!
*   **الموقع:** [http://185.225.233.103](http://185.225.233.103)
*   **إدارة قاعدة البيانات:** [http://185.225.233.103:3000](http://185.225.233.103:3000)
    *   اسم المستخدم: `supabase`
    *   كلمة المرور: `secure-moonlight-password-2024`

---

## كيف تتأكد أن قاعدة البيانات تم إنشاؤها بنجاح؟

1.  افتح رابط إدارة قاعدة البيانات (Studio).
2.  سجل الدخول.
3.  اذهب إلى **Table Editor** (أيقونة الجدول في القائمة الجانبية).
4.  يجب أن ترى جداول مثل `products`, `invoices`, `customers`.
5.  اذهب إلى **Database** -> **Functions**.
6.  يجب أن ترى دالة `process_sale_transaction`.

إذا رأيت هذه الأشياء، مبروك! النظام مثبت وجاهز للعمل 100%.
